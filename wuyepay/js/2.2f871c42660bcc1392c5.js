webpackJsonp([2],{"/0gC":function(e,t,r){"use strict";function n(e){r("woyJ")}Object.defineProperty(t,"__esModule",{value:!0});var a=r("mX1n"),o=r("9azv"),i=r("VU/8"),c=n,s=i(a.a,o.a,!1,c,"data-v-48cb0888",null);t.default=s.exports},"9azv":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{width:"200px",height:"200px","background-color":"red"},on:{click:function(t){e.pay()}}},[e._v("飞碟")])])},a=[],o={render:n,staticRenderFns:a};t.a=o},mX1n:function(e,t,r){"use strict";var n=r("fxnj"),a=r.n(n),o=void 0,i=r("xrTZ").Base64;t.a={data:function(){return{billId:"",payFeeType:"01",payType:"0",reduceAmt:"0.03",reductionAmt:"",ruleType:"",stmtId:"",regionname:"",openid:"",user_id:""}},created:function(){o=this,o.query()},mounted:function(){window.onload=function(){o.getUrlParam()}},components:{},computed:{},methods:{IsWeixinOrAlipay:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?"Weixin":"allpayclient"==e.match("allpayclient")?"Alipay":"false"},query:function(){var e=o.IsWeixinOrAlipay();"Alipay"===e?o.common.alipayAuthorize():"Weixin"===e?o.common.weixinAuthorize():alert("请用微信或支付扫码支付")},getUrlParam:function(){var e={},t=window.location.search.substr(1);console.log(t);var r=o.getParam(t,"param");r=i.decode(r),console.log(r);var n=r.split("&");console.log(n);for(var a=0;a<n.length;a++)e[n[a].split("=")[0]]=unescape(n[a].split("=")[1]);console.log(e),o.billId=e.bill_id,o.payFeeType=e.pay_fee_type,o.payType=e.pay_type,o.reduceAmt=e.reduceAmt,o.reductionAmt=e.reduction_amt,o.ruleType=e.rule_type,o.stmtId=e.stmt_id,o.regionname=e.regionname,o.openid=o.getParam(t,"openid"),o.user_id=o.getParam(t,"user_id")},pay:function(){var e=o.IsWeixinOrAlipay();if("false"===e)return void alert("请使用微信或支付宝扫码支付");var t={};t.isQrcode="1",t.billId=o.billId,t.payFeeType=o.payFeeType,t.payType=o.payType,t.reduceAmt=o.reduceAmt,t.reductionAmt=o.reductionAmt,t.ruleType=o.ruleType,t.stmtId=o.stmtId,t.regionname=o.regionname,"Alipay"===e?t.alipayUserId=o.user_id:"Weixin"===e&&(t.openid=o.openid),console.log(t),o.receiveData.postData(o,"/getPrePayInfo",t,"res",function(){if(o.res.success){if(console.log("123"),"Alipay"===e){if(0==o.res.success)return void alert(o.res.message);var t=o.res.result.packageId;ap.tradePay({tradeNo:t},function(e){"9000"===e.resultCode&&ap.call("closeWebview")})}else if("WeiXin"===e){if(0==o.res.success)return void alert(o.res.message);console.log("456"),a.a.config({debug:!1,appId:o.res.result.appid,timestamp:o.res.result.timestamp,nonceStr:o.res.result.noncestr,signature:o.res.result.paysign,jsApiList:["chooseWXPay"]}),a.a.chooseWXPay({appId:o.res.result.appid,timestamp:o.res.result.timestamp,nonceStr:o.res.result.noncestr,package:o.res.result.package,signType:o.res.result.signtype,paySign:o.res.result.paysign,success:function(e){a.a.closeWindow()},fail:function(){},cancel:function(){}})}}else alert(null==o.res.message?"支付请求失败，请稍后重试!":o.res.message)})}}}},qsxO:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"",""])},woyJ:function(e,t,r){var n=r("qsxO");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r("rjj0")("dbb92494",n,!0)},xrTZ:function(e,t,r){(function(r){var n,a;!function(t,r){e.exports=r(t)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:this,function(r){"use strict";r=r||{};var o,i=r.Base64,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(c),u=String.fromCharCode,l=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(p,l)},f=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[c.charAt(r>>>18),c.charAt(r>>>12&63),t>=2?"=":c.charAt(r>>>6&63),t>=1?"=":c.charAt(63&r)].join("")},y=r.btoa&&"function"==typeof r.btoa?function(e){return r.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},g=function(e){return y(d(String(e)))},h=function(e){return e.replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,"")},m=function(e,t){return t?h(g(e)):g(e)},A=function(e){return m(e,!0)};r.Uint8Array&&(o=function(e,t){for(var r="",n=0,a=e.length;n<a;n+=3){var o=e[n],i=e[n+1],s=e[n+2],u=o<<16|i<<8|s;r+=c.charAt(u>>>18)+c.charAt(u>>>12&63)+(void 0!==i?c.charAt(u>>>6&63):"=")+(void 0!==s?c.charAt(63&u):"=")}return t?h(r):r});var v,x=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,b=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return u(55296+(r>>>10))+u(56320+(1023&r));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},C=function(e){return e.replace(x,b)},w=function(e){var t=e.length,r=t%4,n=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),a=[u(n>>>16),u(n>>>8&255),u(255&n)];return a.length-=[0,0,2,1][r],a.join("")},B=r.atob&&"function"==typeof r.atob?function(e){return r.atob(e)}:function(e){return e.replace(/\S{1,4}/g,w)},F=function(e){return B(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},I=function(e){return C(B(e))},_=function(e){return String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},T=function(e){return I(_(e))};r.Uint8Array&&(v=function(e){return Uint8Array.from(F(_(e)),function(e){return e.charCodeAt(0)})});var P=function(){var e=r.Base64;return r.Base64=i,e};if(r.Base64={VERSION:"2.6.3",atob:F,btoa:y,fromBase64:T,toBase64:m,utob:d,encode:m,encodeURI:A,btou:C,decode:T,noConflict:P,fromUint8Array:o,toUint8Array:v},"function"==typeof Object.defineProperty){var S=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",S(function(){return T(this)})),Object.defineProperty(String.prototype,"toBase64",S(function(e){return m(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",S(function(){return m(this,!0)}))}}return r.Meteor&&(Base64=r.Base64),void 0!==e&&e.exports?e.exports.Base64=r.Base64:(n=[],void 0!==(a=function(){return r.Base64}.apply(t,n))&&(e.exports=a)),{Base64:r.Base64}})}).call(t,r("DuR2"))}});