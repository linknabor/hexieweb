webpackJsonp([9],{Nz9X:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("fxnj");var s,a={data:function(){return{orderId:"8677",item:{},imgUrl:"",falg:!1,imgs:""}},created:function(){s=this},components:{},computed:{},mounted:function(){s.query()},methods:{query:function(){s.receiveData.getData(s,"/queryPromotionOrder","res",function(){s.res.success?0==s.res.result?s.getdetail():s.order():null!=s.res.message&&alert(s.res.message)})},order:function(){s.receiveData.getData(s,"/evoucher/getByOrder/"+s.orderId,"res",function(){s.res.success?(s.item=s.res.result,s.bgload()):null!=s.res.message&&alert(s.res.message)})},getdetail:function(){s.receiveData.getData(s,"/onsales/getPromotion","res",function(){s.res.success?s.$router.push({path:"/salesdetail",query:{ruleId:s.res.result[0].ruleId,productType:s.res.result[0].productType}}):null!=s.res.message&&alert(s.res.message)})},bgload:function(){s.imgUrl="http://img.e-shequ.com/FogXNV1BmqMXGGTQ-LDyVr1rkRZk";var e=1334,t=document.getElementById("bg"),r=s.item.qrcode,a="";(a=document.getElementById("canvas")).width=750,a.height=e;var n=a.getContext("2d"),o=new Image;o.src=r,t.onload=function(){n.drawImage(t,0,0,n.canvas.width,n.canvas.height),n.drawImage(o,750-e/7.6-130,e-e/7.9-9,e/7,e/8),s.imgs=a.toDataURL("image/jpeg",1),s.downloadFile("tox.png",s.imgs)}},base64Img2Blob:function(e){for(var t=e.split(";base64,"),r=t[0].split(":")[1],s=window.atob(t[1]),a=s.length,n=new Uint8Array(a),o=0;o<a;++o)n[o]=s.charCodeAt(o);return new Blob([n],{type:r})},downloadFile:function(e,t){s.base64Img2Blob(t)}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:this.falg,expression:"falg"}]},[t("canvas",{attrs:{id:"canvas"}}),this._v(" "),t("img",{attrs:{src:this.imgUrl,id:"bg",crossOrigin:"Anonymous"}})]),this._v(" "),t("img",{attrs:{src:this.imgs,alt:""}})])},staticRenderFns:[]};var o=r("VU/8")(a,n,!1,function(e){r("PWVO")},"data-v-65682abc",null);t.default=o.exports},PWVO:function(e,t){}});