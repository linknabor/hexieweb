webpackJsonp([4],{ASeG:function(e,t,n){"use strict";(function(e){var n;t.a={data:function(){return{orderId:"",item:{},imgUrl:"",falg:!1}},created:function(){n=this},components:{},computed:{},mounted:function(){n.query()},updated:function(){},methods:{query:function(){n.receiveData.getData(n,"/queryPromotionOrder","res",function(){n.res.success?0==n.res.result?n.getdetail():(n.orderId=n.res.result,n.order()):null!=n.res.message&&alert(n.res.message)})},order:function(){n.receiveData.getData(n,"/evoucher/getByOrder/"+n.orderId,"res",function(){n.res.success?n.item=n.res.result:null!=n.res.message&&alert(n.res.message),n.bgload(),e("#bg").hide()})},getdetail:function(){n.receiveData.getData(n,"/onsales/getPromotion","res",function(){n.res.success?n.$router.push({path:"/salesdetail",query:{ruleId:n.res.result[0].ruleId,productType:n.res.result[0].productType}}):null!=n.res.message&&alert(n.res.message)})},bgload:function(){var e=document.documentElement.clientWidth||document.body.clientWidth,t=document.documentElement.clientHeight||document.body.clientHeight,r=document.getElementById("bg"),a=n.item.qrcode,s="";(s=document.getElementById("canvas")).width=e,s.height=t;var o=s.getContext("2d");o.drawImage(r,0,0,o.canvas.width,o.canvas.height);var i=new Image;i.src=a,i.onload=function(){o.drawImage(i,e-t/9.3-68,t-t/9.3-9,t/9.3,t/9.3),n.downloadFile("tox.png",s.toDataURL("image/png"))}},base64Img2Blob:function(e){for(var t=e.split(";base64,"),r=t[0].split(":")[1],a=window.atob(t[1]),s=a.length,o=new Uint8Array(s),i=0;i<s;++i)o[i]=a.charCodeAt(i);return n.falg=!0,new Blob([o],{type:r})},downloadFile:function(e,t){n.base64Img2Blob(t)}}}}).call(t,n("7t+N"))},M9zv:function(e,t){},Nz9X:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("ASeG"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.falg,expression:"falg"}]},[t("canvas",{attrs:{id:"canvas"}}),this._v(" "),t("img",{attrs:{src:n("il9N"),id:"bg"}})])},staticRenderFns:[]};var s=function(e){n("M9zv")},o=n("VU/8")(r.a,a,!1,s,"data-v-323b24cc",null);t.default=o.exports},il9N:function(e,t,n){e.exports=n.p+"static/img/haib.efbbc25.png"}});