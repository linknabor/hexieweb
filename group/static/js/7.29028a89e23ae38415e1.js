webpackJsonp([7],{ASeG:function(e,t,s){"use strict";(function(e){var s;t.a={data:function(){return{orderId:"8677",item:{},imgUrl:"",falg:!1,flg:!1}},created:function(){s=this},components:{},computed:{},mounted:function(){s.query()},updated:function(){},methods:{query:function(){s.receiveData.getData(s,"/queryPromotionOrder","res",function(){s.res.success?0==s.res.result?s.getdetail():s.order():null!=s.res.message&&alert(s.res.message)})},order:function(){s.receiveData.getData(s,"/evoucher/getByOrder/"+s.orderId,"res",function(){s.res.success?(s.item=s.res.result,console.log("bgload开始"),s.bgload()):null!=s.res.message&&alert(s.res.message)})},getdetail:function(){s.receiveData.getData(s,"/onsales/getPromotion","res",function(){s.res.success?s.$router.push({path:"/salesdetail",query:{ruleId:s.res.result[0].ruleId,productType:s.res.result[0].productType}}):null!=s.res.message&&alert(s.res.message)})},bgload:function(){document.documentElement.clientWidth||document.body.clientWidth;var t=document.documentElement.clientHeight||document.body.clientHeight,a=document.getElementById("bg");console.log(a.style.src),console.log(a),console.log("bg加载"+a);var n=s.item.qrcode,o="";o=document.getElementById("canvas"),t=400,o.width=300,o.height=t;var r=o.getContext("2d");r.drawImage(a,0,0,r.canvas.width,r.canvas.height);var i=new Image;i.src=n,i.onload=function(){console.log("load开始"),r.drawImage(i,300-t/9.3-68,t-t/9.3-9,t/9.3,t/9.3),s.downloadFile("tox.png",o.toDataURL("image/png")),s.falg=!0,e("#bg").hide()}},base64Img2Blob:function(e){console.log("base64Img2Blobs");for(var t=e.split(";base64,"),s=t[0].split(":")[1],a=window.atob(t[1]),n=a.length,o=new Uint8Array(n),r=0;r<n;++r)o[r]=a.charCodeAt(r);return new Blob([o],{type:s})},downloadFile:function(e,t){s.base64Img2Blob(t)}}}}).call(t,s("7t+N"))},Nz9X:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("ASeG"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:this.falg,expression:"falg"}]},[t("canvas",{attrs:{id:"canvas"}}),this._v(" "),t("img",{attrs:{src:"https://img10.360buyimg.com/n5/jfs/t1/126307/11/6098/124987/5efdb36eE4e4f402c/daad46fa159b65e8.jpg",id:"bg"}})]),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:this.flg,expression:"flg"}]},[t("img",{attrs:{src:this.imgUrl,alt:""}})])])},staticRenderFns:[]};var o=function(e){s("hf1m")},r=s("VU/8")(a.a,n,!1,o,"data-v-3c037aaf",null);t.default=r.exports},hf1m:function(e,t){}});