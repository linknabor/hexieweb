webpackJsonp([13],{YOV7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),n=s.n(i),a=s("fxnj"),r=s.n(a),o=void 0,c={data:function(){return{zzshow:!1,ruleId:this.$route.query.ruleId,productType:this.$route.query.productType,name:this.$route.query.name,price:this.$route.query.price,oriPrice:this.$route.query.oriPrice,pictures:this.$route.query.pictures,tel:"",yzm:"",yzmtime:60,yzmstr:"获取验证码",isOriginHei:!0,screenHeight:document.documentElement.clientHeight,originHeight:document.documentElement.clientHeight}},created:function(){o=this},components:{},computed:{},mounted:function(){window.onresize=function(){o.screenHeight=document.documentElement.clientHeight}},watch:{screenHeight:function(e){this.originHeight>e+100?this.isOriginHei=!1:this.isOriginHei=!0}},methods:{getCaptcha:function(){/^1[3-9][0-9]\d{8}$/.test(o.tel)?"获取验证码"!=o.yzmstr&&"重新获取"!=o.yzmstr||(o.yzmstr="获取中",o.yzmreq()):alert("请输入正确的手机号")},yzmreq:function(){var e={mobile:o.tel,type:"103"};o.common.invokeApi("POST","getyzm",e,function(e){e.setRequestHeader("Access-Control-Allow-Token",void 0)},function(e){o.yzmtime=60,alert(e.result);var t=setInterval(function(){o.yzmstr=o.yzmtime+"秒后重新获取",o.yzmtime--,o.yzmtime<=0&&(o.yzmstr="重新获取")},1e3);setTimeout(function(){clearInterval(t)},61e3)},function(e){alert(null==e.message?"获取验证码失败":e.message)})},btnpay:function(){o.zzshow=!0;var e={ruleId:o.ruleId,productType:o.productType,mobile:o.tel,code:o.yzm};o.receiveData.postData(o,"/promotionPay",e,"res",function(){if(o.res.success){var e=o.res;r.a.config({debug:!1,appId:e.result.appId,timestamp:e.result.timestamp,nonceStr:e.result.nonceStr,signature:e.result.signature,jsApiList:["chooseWXPay"]}),r.a.chooseWXPay({appId:e.result.appId,timestamp:e.result.timestamp,nonceStr:e.result.nonceStr,package:e.result.pkgStr,signType:e.result.signType,paySign:e.result.signature,success:function(e){o.zzshow=!1,o.$router.push({path:"/sassuccess"})},fail:function(e){o.zzshow=!1,console.log(n()(e))},cancel:function(e){o.zzshow=!1,alert("支付取消")}})}else o.zzshow=!1,alert(o.res.message)})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cardrollgoods"},[s("div",{staticStyle:{background:"white",height:"15px",width:"100%"}},[e._v(" ")]),e._v(" "),s("div",{staticClass:"addr-top"},[e._v(" ")]),e._v(" "),s("div",{staticClass:"goods-warp"},[s("div",{staticClass:"centrent"},[s("div",{staticClass:"ov"},[s("img",{staticClass:"icon-goods fl",attrs:{src:e.pictures}}),e._v(" "),s("div",{staticClass:"ov sale-name"},[s("span",{staticClass:"nowrap"},[e._v(e._s(e.name))]),s("br"),e._v(" "),s("span",{staticClass:"color"},[e._v("¥"+e._s(e.price))]),e._v(" "),s("del",[e._v(e._s(e.oriPrice))])])])]),e._v(" "),s("div",{staticClass:"footer"},[s("div",{staticClass:"region"},[s("span",{staticClass:" szym "},[e._v("手机号")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],attrs:{type:"tel",placeholder:"请输入您的联系电话"},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}}),e._v(" "),s("span",{staticClass:"yzz",on:{click:e.getCaptcha}},[e._v(e._s(e.yzmstr))])]),e._v(" "),s("div",{staticClass:"region"},[s("span",{staticClass:"szym"},[e._v("验证码")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.yzm,expression:"yzm"}],staticClass:"yzm",attrs:{type:"number",oninput:"if(value.length>6)value=value.slice(0,6)",placeholder:"请输入验证码"},domProps:{value:e.yzm},on:{input:function(t){t.target.composing||(e.yzm=t.target.value)}}})])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOriginHei,expression:"isOriginHei"}],staticClass:"btn",on:{click:e.btnpay}},[e._v("\n        立即支付\n    ")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.zzshow,expression:"zzshow"}],staticClass:"zzmb",attrs:{id:"zzmb"}})])},staticRenderFns:[]};var u=s("VU/8")(c,l,!1,function(e){s("dUZW")},"data-v-5aa7ebde",null);t.default=u.exports},dUZW:function(e,t){}});