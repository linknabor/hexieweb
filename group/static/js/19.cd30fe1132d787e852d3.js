webpackJsonp([19],{"9+Bn":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=s("mvHQ"),a=s.n(c),i=void 0,r={data:function(){return{count:0,cartlist:[],ruleId:this.$route.query.ruleId,totalPrice:0,tatalprices:0,freePrice:0,quan:!1}},created:function(){i=this},components:{},computed:{},watch:{},mounted:function(){i.getcart()},methods:{getcart:function(){i.receiveData.getData(i,"/cart/get","res",function(){i.res.success?null!=i.res.result&&(i.cartlist=i.res.result,i.cartlist.items.forEach(function(t){i.$set(t,"selected",!0)}),i.totalPrice=parseFloat(i.res.result.totalPrice)-parseFloat(i.res.result.totalShipFee),0==i.cartlist.items.length?i.quan=!1:i.quan=!0):alert(i.res.message)})},reducee:function(t,e){t.count--,t.count<0?t.count=0:(i.delsetprice(t),i.delcount(t.ruleId))},delcount:function(t){var e={ruleId:t,count:1};i.receiveData.postData(i,"/cart/del",e,"res",function(){i.res.success})},add:function(t,e){t.count++,i.addsetprice(t),i.addcount(t.ruleId)},addcount:function(t){var e={ruleId:t,count:1};i.receiveData.postData(i,"/cart/add",e,"res",function(){i.res.success})},checkeds:function(t,e){if(i.cartlist.items[e].selected)i.cartlist.items[e].selected=!1,i.quan=!1;else{i.cartlist.items[e].selected=!0;for(var s=!0,c=0;c<i.cartlist.items.length;c++)i.cartlist.items[c].selected||(s=!1);s&&(i.quan=!0)}i.selectprice(t)},Selectall:function(){var t=0;i.quan?(i.cartlist.items.forEach(function(t){t.selected=!1}),i.quan=!1,i.totalPrice=0):(i.cartlist.items.forEach(function(e){e.selected=!0,t+=e.price*e.count}),i.quan=!0,i.totalPrice=parseFloat(t).toFixed(2))},selectprice:function(t){t.selected?i.totalPrice=(parseFloat(i.totalPrice)+t.price*t.count).toFixed(2):i.totalPrice=(parseFloat(i.totalPrice)-t.price*t.count).toFixed(2)},addsetprice:function(t){t.selected&&(i.totalPrice=(parseFloat(i.totalPrice)+parseFloat(t.price)).toFixed(2))},delsetprice:function(t){t.selected&&(i.totalPrice=(parseFloat(i.totalPrice)-parseFloat(t.price)).toFixed(2))},settlement:function(){if(i.quan){for(var t=[],e=0;e<i.cartlist.items.length;e++)i.cartlist.items[e].selected&&i.cartlist.items[e].count>0&&t.push({ruleId:i.cartlist.items[e].ruleId,count:i.cartlist.items[e].count});window.localStorage.setItem("itemList",a()(t)),window.location.href=i.basePageUrlpay+"hxgrouppay.html?"+i.common.getoriApp()+"#/confirmation?v=1"}}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"carts"},[s("div",{staticClass:"cart"},t._l(t.cartlist.items,function(e,c){return s("div",{key:c},[s("div",{staticClass:"head-border"},[s("div",{staticClass:"fl car-select",class:{actives:e.selected},on:{click:function(s){t.checkeds(e,c)}}}),t._v(" "),s("div",{staticClass:"ov"},[s("div",{staticClass:"fl "},[s("div",{staticClass:"cart-imgs"},[s("img",{attrs:{src:e.productThumbPic,alt:""}})])]),t._v(" "),s("div",{staticClass:"ov cart-content "},[s("span",{staticClass:"f14 marb4"},[t._v(t._s(e.ruleName))]),s("br"),t._v(" "),s("span",{staticClass:"marb4 free color"},[t._v("满"+t._s(e.freeShippingNum)+"件免运费")]),s("br"),t._v(" "),s("del",{staticClass:"marb4"},[t._v("¥"+t._s(e.oriPrice))]),s("br"),t._v(" "),s("span",{staticClass:"color"},[t._v("¥"+t._s(e.price))]),s("span",[t._v("/箱")]),t._v(" "),s("div",{staticClass:"choose-num"},[s("span",{staticClass:"reducee",on:{click:function(s){t.reducee(e,c)}}},[t._v("-")]),t._v(" "),s("input",{staticClass:"numberr",attrs:{type:"number",readonly:""},domProps:{value:e.count}}),t._v(" "),s("span",{staticClass:"addd",on:{click:function(s){t.add(e,c)}}},[t._v("+")])])])])]),t._v(" "),s("div",{staticClass:"bg",class:{headNone:c+1==t.cartlist.items.length}})])}),0),t._v(" "),s("div",{staticClass:"btn"},[s("div",{staticClass:"fl btn-left"},[s("div",{staticClass:"fl",on:{click:function(e){t.Selectall()}}},[s("div",{staticClass:"btn-select",class:{active:t.quan}}),t._v("全选\r\n            ")]),t._v(" "),s("div",{staticClass:"fr total"},[s("span",[t._v("合计：")]),s("span",{staticClass:"color money"},[t._v("¥"+t._s(t.totalPrice))]),s("br"),t._v(" "),s("span",[t._v("不含运费")])])]),t._v(" "),s("div",{staticClass:"fr btn-right f14",on:{click:t.settlement}},[t._v("\r\n            结算\r\n        ")])])])},staticRenderFns:[]};var n=s("VU/8")(r,l,!1,function(t){s("g3Yl")},"data-v-34538c64",null);e.default=n.exports},g3Yl:function(t,e){}});