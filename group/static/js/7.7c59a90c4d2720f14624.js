webpackJsonp([7],{ASeG:function(e,t,n){"use strict";(function(e){var r,s=n("fxnj");n.n(s);t.a={data:function(){return{orderId:"8677",item:{},imgUrl:"",falg:!1}},created:function(){r=this},components:{},computed:{},mounted:function(){r.query()},methods:{query:function(){r.receiveData.getData(r,"/queryPromotionOrder","res",function(){r.res.success?0==r.res.result?r.getdetail():r.order():null!=r.res.message&&alert(r.res.message)})},order:function(){r.receiveData.getData(r,"/evoucher/getByOrder/"+r.orderId,"res",function(){r.res.success?(r.item=r.res.result,r.bgload()):null!=r.res.message&&alert(r.res.message)})},getdetail:function(){r.receiveData.getData(r,"/onsales/getPromotion","res",function(){r.res.success?r.$router.push({path:"/salesdetail",query:{ruleId:r.res.result[0].ruleId,productType:r.res.result[0].productType}}):null!=r.res.message&&alert(r.res.message)})},bgload:function(){r.imgUrl="http://img.e-shequ.com/FogXNV1BmqMXGGTQ-LDyVr1rkRZk";var t=document.documentElement.clientWidth||document.body.clientWidth,n=document.documentElement.clientHeight||document.body.clientHeight,s=document.getElementById("bg"),a=r.item.qrcode,o="";(o=document.getElementById("canvas")).width=t,o.height=n;var i=o.getContext("2d"),c=new Image;c.src=a,s.onload=function(){i.drawImage(s,0,0,i.canvas.width,i.canvas.height),i.drawImage(c,t-n/7.8-70,n-n/8.8-9,n/8,n/8),r.downloadFile("tox.png",o.toDataURL("image/png")),r.falg=!0,e("#bg").hide()}},base64Img2Blob:function(e){console.log("base64Img2Blobs");for(var t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),s=r.length,a=new Uint8Array(s),o=0;o<s;++o)a[o]=r.charCodeAt(o);return new Blob([a],{type:n})},downloadFile:function(e,t){r.base64Img2Blob(t)}}}}).call(t,n("7t+N"))},Nz9X:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("ASeG"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:this.falg,expression:"falg"}]},[t("canvas",{attrs:{id:"canvas"}}),this._v(" "),t("img",{attrs:{src:this.imgUrl,id:"bg",crossOrigin:"Anonymous"}})])])},staticRenderFns:[]};var a=function(e){n("yopx")},o=n("VU/8")(r.a,s,!1,a,"data-v-64128da4",null);t.default=o.exports},yopx:function(e,t){}});