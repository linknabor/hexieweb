webpackJsonp([4],{"6UMn":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),n=(s("lbHh"),s("fxnj")),r=s.n(n),o=void 0,c=void 0,l={data:function(){return{zzshow:!1,province:"",city:"",area:"",provincelist:[],citylist:[],arealist:[],residential:"",resname:"",tel:"",yzm:"",yzmtime:60,yzmstr:"获取验证码",agree:!1,ruleId:this.$route.query.ruleId,productType:this.$route.query.productType,shareCode:this.$route.query.shareCode,isOriginHei:!0,screenHeight:document.documentElement.clientHeight,originHeight:document.documentElement.clientHeight}},created:function(){o=this},components:{},computed:{},mounted:function(){window.onresize=function(){o.screenHeight=document.documentElement.clientHeight},o.getprovince()},watch:{screenHeight:function(e){this.originHeight>e+100?this.isOriginHei=!1:this.isOriginHei=!0}},methods:{getprovince:function(){o.common.invokeApi("get","regions/1/0",null,function(e,t){c=e.getResponseHeader("Access-Control-Allow-Token")},function(e){e.success?o.provincelist=e.result:alert(e.message)},function(e){alert(e.message)})},setprovince:function(){""!=o.province&&o.getcity(),o.citylist=[],o.arealist=[],o.city="",o.area=""},getcity:function(){o.receiveData.getData(o,"/regions/2/"+o.province,"res",function(){o.res.success?o.citylist=o.res.result:alert(o.res.message)})},setcity:function(){""!=o.city?o.getarea():(o.arealist=[],o.area="")},getarea:function(){o.receiveData.getData(o,"/regions/3/"+o.city,"res",function(){o.res.success?o.arealist=o.res.result:alert(o.res.message)})},getCaptcha:function(){/^1[3-9][0-9]\d{8}$/.test(o.tel)?"获取验证码"!=o.yzmstr&&"重新获取"!=o.yzmstr||(o.yzmstr="获取中",o.yzmreq()):alert("请输入正确的手机号")},yzmreq:function(){var e={mobile:o.tel};o.common.invokeApi("POST","getyzm",e,function(e){e.setRequestHeader("Access-Control-Allow-Token",c)},function(e){if(e.success){o.yzmtime=60,alert("验证码已下发，请查收短信");var t=setInterval(function(){o.yzmstr=o.yzmtime+"秒后重新获取",o.yzmtime--,o.yzmtime<=0&&(o.yzmstr="重新获取")},1e3);setTimeout(function(){clearInterval(t)},61e3)}else alert(e.message)},function(e){})},demm:function(){},pay:function(){if(o.agree)if(""!=o.province&&""!=o.city&&""!=o.area&&""!=o.residential&&""!=o.resname&&""!=o.tel&&""!=o.zym){o.zzshow=!0;var e={province:o.province,city:o.city,county:o.area,sectName:o.residential,name:o.resname,mobile:o.tel,code:o.yzm,ruleId:o.ruleId,productType:o.productType,shareCode:o.shareCode};o.receiveData.postData(o,"/promotionPay",e,"res",function(){if(console.log(o.res),o.res.success){var e=o.res;r.a.config({debug:!1,appId:e.result.appId,timestamp:e.result.timestamp,nonceStr:e.result.nonceStr,signature:e.result.signature,jsApiList:["chooseWXPay"]}),r.a.chooseWXPay({appId:e.result.appId,timestamp:e.result.timestamp,nonceStr:e.result.nonceStr,package:e.result.pkgStr,signType:e.result.signType,paySign:e.result.signature,success:function(t){o.zzshow=!1,o.$router.push({path:"/salessuccess",query:{orderId:e.result.orderId}})},fail:function(e){console.log(i()(e))},cancel:function(e){o.zzshow=!1,alert("支付取消")}})}else o.zzshow=!1,alert(o.res.message)})}else alert("请填写完整信息")}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wapr"},[s("div",{staticClass:"salepas"},[s("div",{staticClass:"region"},[s("span",[e._v("运营区域")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.province,expression:"province"}],staticClass:"mg20",class:{scolor:""!=e.province},attrs:{name:"province",id:""},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.province=t.target.multiple?s:s[0]},function(t){return e.setprovince()}]}},[s("option",{attrs:{value:"",selected:"selected"}},[e._v("省")]),e._v(" "),e._l(e.provincelist,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),s("span"),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.city,expression:"city"}],staticClass:"mg20",class:{scolor:""!=e.city},attrs:{name:"city",id:""},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.city=t.target.multiple?s:s[0]},e.setcity]}},[s("option",{attrs:{value:"",selected:"selected"}},[e._v("市")]),e._v(" "),e._l(e.citylist,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.area,expression:"area"}],class:{scolor:""!=e.area},attrs:{name:"area",id:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.area=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",selected:"selected"}},[e._v("区")]),e._v(" "),e._l(e.arealist,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2)]),e._v(" "),s("div",{staticClass:"region"},[s("span",[e._v("\n                    运营小区\n                ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.residential,expression:"residential"}],attrs:{type:"text",placeholder:"请输入您想要运营的小区名"},domProps:{value:e.residential},on:{input:function(t){t.target.composing||(e.residential=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"region"},[s("span",[e._v("\n                   您的姓名\n                ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.resname,expression:"resname"}],attrs:{type:"text",placeholder:"请输入您的姓名"},domProps:{value:e.resname},on:{input:function(t){t.target.composing||(e.resname=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"region"},[s("span",[e._v("\n                    联系电话\n                ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],staticClass:"tel",attrs:{type:"tel",placeholder:"请输入您的联系电话"},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}}),e._v(" "),s("span",{staticClass:"yzz",on:{click:e.getCaptcha}},[e._v(e._s(e.yzmstr))])]),e._v(" "),s("div",{staticClass:"region mgnone"},[s("span",{staticClass:"szym"},[e._v("\n                    验证码  \n                ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.yzm,expression:"yzm"}],staticClass:"yzm",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.yzm},on:{input:function(t){t.target.composing||(e.yzm=t.target.value)}}})]),e._v(" "),s("div",{staticStyle:{height:"0.4rem",width:"100%"}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOriginHei,expression:"isOriginHei"}],staticClass:"btn"},[s("div",{staticClass:"btn-agree"},[s("label",{staticClass:"chendad",class:{"addse adds":1==e.agree},attrs:{for:"checkbox_a6"}}),e._v(" "),s("span",{on:{click:e.demm}},[e._v("已阅读并同意《协议》")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.agree,expression:"agree"}],attrs:{type:"checkbox",id:"checkbox_a6"},domProps:{checked:Array.isArray(e.agree)?e._i(e.agree,null)>-1:e.agree},on:{change:function(t){var s=e.agree,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&(e.agree=s.concat([null])):n>-1&&(e.agree=s.slice(0,n).concat(s.slice(n+1)))}else e.agree=i}}})]),e._v(" "),s("div",{staticClass:"pay",on:{click:e.pay}},[s("span",[e._v("立即支付")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.zzshow,expression:"zzshow"}],staticClass:"zzmb",attrs:{id:"zzmb"}})])},staticRenderFns:[]};var m=s("VU/8")(l,u,!1,function(e){s("cpEu")},"data-v-d00d637a",null);t.default=m.exports},cpEu:function(e,t){}});