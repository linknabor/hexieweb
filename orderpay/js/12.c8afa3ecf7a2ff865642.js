webpackJsonp([12],{BD5V:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("fxnj"),n=s.n(a),o=void 0,r={data:function(){return{zzshow:!1,orders:[],currentStatus:"ALL",dropdownCollapsed:!1,selectedName:"订单筛选",dropdowns:[{name:"全部订单",value:"ALL"},{name:"待付款订单",value:"NEEDPAY"},{name:"已支付",value:"PAYED"},{name:"配货中",value:"PREPARE"},{name:"待收货订单",value:"NEEDRECEIVE"},{name:"已取消订单",value:"CANCELD"}]}},created:function(){o=this},components:{},computed:{},mounted:function(){o.query()},methods:{query:function(){o.receiveData.getData(o,"evoucher/orders/"+o.currentStatus,"res",function(){o.res.success?o.orders=o.res.result:alert(o.messages)})},toggleDropdown:function(){o.dropdownCollapsed=!o.dropdownCollapsed},selectDropdown:function(t){o.selectedName=o.dropdowns[t].name,o.currentStatus=o.dropdowns[t].value,o.query()},orderPay:function(t){o.zzshow=!0,o.receiveData.getData(o,"requestPay/"+t.id,"n",function(){o.n.success||(alert(o.n.message),o.zzshow=!1),n.a.config({debug:!1,appId:o.n.result.appId,timestamp:o.n.result.timestamp,nonceStr:o.n.result.nonceStr,signature:o.n.result.signature,jsApiList:["chooseWXPay"]}),n.a.chooseWXPay({timestamp:o.n.result.timestamp,nonceStr:o.n.result.nonceStr,package:o.n.result.pkgStr,signType:o.n.result.signType,paySign:o.n.result.signature,success:function(e){o.notifyPaySuccess(t),t.status=1,o.zzshow=!1},cancel:function(t){o.zzshow=!1}})})},notifyPaySuccess:function(t){o.receiveData.getData(o,"/notifyPayed/"+t.id,"n",function(){})},orderCancel:function(t){o.receiveData.getData(o,"/cancelOrder/"+t.id,"res",function(){o.res.success?(o.cancelPay(t),t.status=2,t.statusStr="已取消",alert("订单已取消")):alert("支付取消失败，请稍后重试！")})},cancelPay:function(t){o.receiveData.postData(o,"/order/cancelPay/"+t.id,{},"n",function(){})},VolumeCode:function(t){window.location.href=o.basePageUrl+"person/index.html?"+o.common.getoriApp()+"#/cardrolldetail?orderId="+t.id}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cardorder"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"dropdown-wrap ",class:{dropdownCollapsed:t.dropdownCollapsed},on:{click:t.toggleDropdown}},[s("span",[t._v(t._s(t.selectedName))]),t._v(" "),t.dropdownCollapsed?s("div",{staticClass:"dropdown"},t._l(t.dropdowns,function(e,a){return s("div",{key:a,staticClass:"dropdown-item",class:{noborder:t.dropdowns.length-1==a},on:{click:function(e){t.selectDropdown(a)}}},[t._v(t._s(e.name))])})):t._e()]),t._v(" "),t._l(t.orders,function(e){return s("div",{key:e.id,staticClass:"ov lite-divider pd10 ",staticStyle:{color:"#3b3937"}},[s("div",{staticClass:"marg-bottom"},[s("img",{staticClass:"icon-repair fl",attrs:{src:e.productThumbPic}}),t._v(" "),s("div",{staticClass:"ov right-text not-used"},[s("div",{staticClass:"spot pbottom"},[t._v(t._s(e.productName))]),t._v(" "),s("div",{staticClass:"pbottom"},[t._v("¥"+t._s(e.price))]),t._v(" "),s("div",{staticClass:"ptop ov "},[s("span",{staticClass:"fl "},[t._v("数量: "+t._s(e.count))]),t._v(" "),s("span",{staticClass:"p15 right-color used-r"},[t._v(t._s(e.statusStr))])])])]),t._v(" "),s("div",{staticClass:"mrg5"},[s("span",{staticClass:"fl"},[t._v(t._s(e.createDateStr))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr crrd-dispay",on:{click:function(s){s.stopPropagation(),t.orderPay(e)}}},[t._v("付款")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr card-jm",on:{click:function(s){s.stopPropagation(),t.orderCancel(e)}}},[t._v("取消订单")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status == 1"}],staticClass:"fr card-jm",on:{click:function(s){t.VolumeCode(e)}}},[t._v("查看卷码")])])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.zzshow,expression:"zzshow"}],staticClass:"zzmb",staticStyle:{display:"none",position:"fixed"},attrs:{id:"zzmb"}})],2)])},staticRenderFns:[]};var i=s("VU/8")(r,c,!1,function(t){s("nHjW")},"data-v-54c686d5",null);e.default=i.exports},nHjW:function(t,e){}});