webpackJsonp([14],{"2moi":function(s,e){},BD5V:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("fxnj"),o=t.n(a),r=void 0,n={data:function(){return{zzshow:!1,orders:[],currentStatus:"ALL",dropdownCollapsed:!1,type:this.$route.query.type,selectedName:"订单筛选",dropdowns:[{name:"全部订单",value:"ALL"},{name:"待付款订单",value:"NEEDPAY"},{name:"已支付",value:"PAYED"},{name:"已取消订单",value:"CANCELD"}]}},created:function(){r=this},components:{},computed:{},mounted:function(){r.query()},methods:{query:function(){r.receiveData.getData(r,"evoucher/orders/"+r.currentStatus,"res",function(){r.res.success?r.orders=r.res.result:alert(r.res.messages)})},goorder:function(s){1==s?r.$router.push({path:"/special",query:{type:s}}):2==s?r.$router.push({path:"/cardorder",query:{type:s}}):r.$router.push({path:"/grouporders",query:{type:s}})},toggleDropdown:function(){r.dropdownCollapsed=!r.dropdownCollapsed},selectDropdown:function(s){r.selectedName=r.dropdowns[s].name,r.currentStatus=r.dropdowns[s].value,r.query()},orderPay:function(s){r.zzshow=!0,r.receiveData.getData(r,"requestPay/"+s.id,"n",function(){r.n.success||(alert(r.n.message),r.zzshow=!1),o.a.config({debug:!1,appId:r.n.result.appId,timestamp:r.n.result.timestamp,nonceStr:r.n.result.nonceStr,signature:r.n.result.signature,jsApiList:["chooseWXPay"]}),o.a.chooseWXPay({timestamp:r.n.result.timestamp,nonceStr:r.n.result.nonceStr,package:r.n.result.pkgStr,signType:r.n.result.signType,paySign:r.n.result.signature,success:function(e){r.notifyPaySuccess(s)},cancel:function(s){r.zzshow=!1}})})},notifyPaySuccess:function(s){r.receiveData.getData(r,"/notifyPayed/"+s.id,"res",function(){r.res.success?(s.status=1,s.statusStr="已支付",r.zzshow=!1):alert(r.res.message)})},orderCancel:function(s){r.receiveData.getData(r,"/cancelOrder/"+s.id,"res",function(){r.res.success?(s.status=2,s.statusStr="已取消",alert("订单已取消")):alert(null==r.res.message?"取消失败，请稍后重试！":r.res.message)})},cancelPay:function(s){r.receiveData.getData(r,"/order/cancelRequestPay/"+s.id,"res",function(){r.res.success||alert(r.res.message)})},VolumeCode:function(s){window.location.href=r.basePageUrl+"person/index.html?"+r.common.getoriApp()+"#/cardrolldetail?orderId="+s.id}}},c={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"cardorder"},[t("div",{staticClass:"headersp ov"},[t("div",{staticClass:"fl",class:{white:1==s.type},on:{click:function(e){s.goorder(1)}}},[t("span",{class:{spanborder:1==s.type}},[s._v("特卖订单")])]),s._v(" "),t("div",{staticClass:"fl",class:{white:2==s.type},on:{click:function(e){s.goorder(2)}}},[t("span",{class:{spanborder:2==s.type}},[s._v("优惠订单")])]),s._v(" "),t("div",{staticClass:"fl",class:{white:3==s.type},on:{click:function(e){s.goorder(3)}}},[t("span",{class:{spanborder:3==s.type}},[s._v("团购订单")])])]),s._v(" "),t("div",{staticClass:"dropdown-wrap ",class:{dropdownCollapsed:s.dropdownCollapsed},on:{click:s.toggleDropdown}},[t("span",[s._v(s._s(s.selectedName))]),s._v(" "),s.dropdownCollapsed?t("div",{staticClass:"dropdown"},s._l(s.dropdowns,function(e,a){return t("div",{key:a,staticClass:"dropdown-item",class:{noborder:s.dropdowns.length-1==a},on:{click:function(e){s.selectDropdown(a)}}},[s._v(s._s(e.name))])})):s._e()]),s._v(" "),t("div",{staticClass:"card-content"},[s._l(s.orders,function(e){return t("div",{key:e.id,staticClass:"ov lite-divider pd10 ",staticStyle:{color:"#3b3937"}},[t("div",{staticClass:"marg-bottom"},[t("img",{staticClass:"icon-repair fl",attrs:{src:e.productThumbPic}}),s._v(" "),t("div",{staticClass:"ov right-text not-used"},[t("div",{staticClass:"spot pbottom"},[s._v(s._s(e.productName))]),s._v(" "),t("div",{staticClass:"pbottom"},[s._v("¥"+s._s(e.price))]),s._v(" "),t("div",{staticClass:"ptop ov "},[t("span",{staticClass:"fl "},[s._v("数量: "+s._s(e.count))]),s._v(" "),t("span",{staticClass:"p15 right-color used-r"},[s._v(s._s(e.statusStr))])])])]),s._v(" "),t("div",{staticClass:"mrg5"},[t("span",{staticClass:"fl"},[s._v(s._s(e.createDateStr))]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr crrd-color card-jm",on:{click:function(t){t.stopPropagation(),s.orderPay(e)}}},[s._v("付款")]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr card-jm",on:{click:function(t){t.stopPropagation(),s.orderCancel(e)}}},[s._v("取消订单")]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status == 1"}],staticClass:"fr card-jm",on:{click:function(t){s.VolumeCode(e)}}},[s._v("查看劵码")])])])}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.zzshow,expression:"zzshow"}],staticClass:"zzmb",staticStyle:{display:"none",position:"fixed"},attrs:{id:"zzmb"}})],2)])},staticRenderFns:[]};var i=t("VU/8")(n,c,!1,function(s){t("2moi")},"data-v-7a6eb4c2",null);e.default=i.exports}});